st = `[{"date":"2022-02-08T00:00:00+0000","symbol":"NFLX","volume":6517023,"high":406.61,"low":395.83,"exchange":"XNAS","close":403.53,"open":398.18},{"date":"2022-02-07T00:00:00+0000","volume":8228000,"high":412.35,"low":393.55,"close":402.1,"open":410.17},{"date":"2022-02-04T00:00:00+0000","volume":7782400,"high":412.77,"low":396.64,"close":410.17,"open":407.31},{"date":"2022-02-03T00:00:00+0000","volume":9318383,"high":429.26,"low":404.35,"close":405.6,"open":421.44},{"date":"2022-02-02T00:00:00+0000","volume":14303000,"high":451.98,"low":426.48,"close":429.48,"open":448.25},{"date":"2022-02-01T00:00:00+0000","volume":22403233,"high":458.43,"low":425.5401,"close":457.13,"open":432.96},{"date":"2022-01-31T00:00:00+0000","volume":20025900,"high":427.7,"low":398.2,"close":427.14,"open":401.97},{"date":"2022-01-28T00:00:00+0000","volume":11957500,"high":387,"low":372.08,"close":384.36,"open":386.76},{"date":"2022-01-27T00:00:00+0000","volume":23989294,"high":394.8,"low":378.1,"close":386.7,"open":382.06},{"date":"2022-01-26T00:00:00+0000","volume":11678253,"high":382.66,"low":356.68,"close":359.7,"open":378.27},{"date":"2022-01-25T00:00:00+0000","volume":15113000,"high":387.71,"low":365.13,"close":366.42,"open":379.14},{"date":"2022-01-24T00:00:00+0000","volume":32282979,"high":387.26,"low":351.4701,"close":387.15,"open":383.91},{"date":"2022-01-21T00:00:00+0000","volume":58824800,"high":409.15,"low":379.99,"close":397.5,"open":400.43},{"date":"2022-01-20T00:00:00+0000","volume":8988324,"high":526.61,"low":506.93,"close":508.25,"open":517.7498},{"date":"2022-01-19T00:00:00+0000","volume":4200757,"high":523.21,"low":510.51,"close":515.86,"open":515},{"date":"2022-01-18T00:00:00+0000","volume":4438627,"high":521.745,"low":508.7,"close":510.8,"open":520.08},{"date":"2022-01-14T00:00:00+0000","volume":7849400,"high":538.37,"low":511.88,"close":525.69,"open":517.6},{"date":"2022-01-13T00:00:00+0000","volume":4192271,"high":540.64,"low":518.26,"close":519.2,"open":537.06},{"date":"2022-01-12T00:00:00+0000","volume":3744985,"high":544.27,"low":532.02,"close":537.22,"open":544.27},{"date":"2022-01-11T00:00:00+0000","volume":3072000,"high":543.91,"low":530.07,"close":540.84,"open":536.99},{"date":"2022-01-10T00:00:00+0000","volume":4483300,"high":543.69,"low":526.32,"close":539.85,"open":538.49},{"date":"2022-01-07T00:00:00+0000","volume":3381700,"high":553.43,"low":538.22,"close":541.06,"open":549.46},{"date":"2022-01-06T00:00:00+0000","volume":5709900,"high":563.36,"low":542.01,"close":553.29,"open":554.34},{"date":"2022-01-05T00:00:00+0000","volume":4144100,"high":592.84,"low":566.88,"close":567.52,"open":592},{"date":"2022-01-04T00:00:00+0000","volume":4163623,"high":600.4099,"low":581.6,"close":591.15,"open":599.91},{"date":"2022-01-03T00:00:00+0000","volume":3067500,"high":609.99,"low":590.56,"close":597.37,"open":605.61},{"date":"2021-12-31T00:00:00+0000","volume":1994100,"high":614.08,"low":602.05,"close":602.44,"open":610.01},{"date":"2021-12-30T00:00:00+0000","volume":1621900,"high":620.61,"low":611.24,"close":612.09,"open":612.99},{"date":"2021-12-29T00:00:00+0000","volume":1287200,"high":613.98,"low":604.68,"close":610.54,"open":610.71},{"date":"2021-12-28T00:00:00+0000","volume":1825504,"high":618.41,"low":609.69,"close":610.71,"open":614.95},{"date":"2021-12-27T00:00:00+0000","volume":2062233,"high":615,"low":609.25,"close":613.12,"open":615},{"date":"2021-12-23T00:00:00+0000","volume":1620600,"high":616.88,"low":607.57,"close":614.09,"open":616.4},{"date":"2021-12-22T00:00:00+0000","volume":2332800,"high":614.82,"low":602.63,"close":614.24,"open":603.36},{"date":"2021-12-21T00:00:00+0000","volume":2317600,"high":607.82,"low":593.86,"close":604.92,"open":597.54},{"date":"2021-12-20T00:00:00+0000","volume":3358402,"high":602.8847,"low":584.3908,"close":593.74,"open":586.43},{"date":"2021-12-17T00:00:00+0000","volume":4386900,"high":593.25,"low":581.74,"close":586.73,"open":591.61},{"date":"2021-12-16T00:00:00+0000","volume":3139900,"high":602.83,"low":588,"close":591.06,"open":597.09},{"date":"2021-12-15T00:00:00+0000","volume":2866196,"high":605.69,"low":584.51,"close":605.04,"open":598.18},{"date":"2021-12-14T00:00:00+0000","volume":2983200,"high":602.29,"low":588.13,"close":597.99,"open":598.71},{"date":"2021-12-13T00:00:00+0000","volume":2467566,"high":612.64,"low":599.52,"close":604.56,"open":612},{"date":"2021-12-10T00:00:00+0000","volume":2627194,"high":617.74,"low":605.88,"close":611.66,"open":616.78},{"date":"2021-12-09T00:00:00+0000","volume":2376321,"high":630.24,"low":610.44,"close":611,"open":627.58},{"date":"2021-12-08T00:00:00+0000","volume":2219200,"high":632.46,"low":623.2,"close":628.08,"open":630},{"date":"2021-12-07T00:00:00+0000","volume":3057462,"high":628.87,"low":611.44,"close":625.58,"open":619.83},{"date":"2021-12-06T00:00:00+0000","volume":3075672,"high":617.29,"low":601,"close":612.69,"open":606.01},{"date":"2021-12-03T00:00:00+0000","volume":4825200,"high":625.5,"low":594,"close":602.13,"open":622.75},{"date":"2021-12-02T00:00:00+0000","volume":3328500,"high":625.36,"low":612.88,"close":616.47,"open":617.1},{"date":"2021-12-01T00:00:00+0000","volume":3897019,"high":654.52,"low":617.07,"close":617.77,"open":649.48},{"date":"2021-11-30T00:00:00+0000","volume":5605300,"high":675.38,"low":640.01,"close":641.9,"open":668.2},{"date":"2021-11-29T00:00:00+0000","volume":2529364,"high":667.97,"low":658.29,"close":663.84,"open":663.2},{"date":"2021-11-26T00:00:00+0000","volume":2872500,"high":676.41,"low":660.67,"close":665.64,"open":675},{"date":"2021-11-24T00:00:00+0000","volume":1867282,"high":661.44,"low":651.1,"close":658.29,"open":658.01},{"date":"2021-11-23T00:00:00+0000","volume":2269193,"high":666.43,"low":646.17,"close":654.06,"open":658.18},{"date":"2021-11-22T00:00:00+0000","volume":2685900,"high":679.48,"low":656.48,"close":659.2,"open":676.02},{"date":"2021-11-19T00:00:00+0000","volume":2613700,"high":694.16,"low":675,"close":678.8,"open":692.35},{"date":"2021-11-18T00:00:00+0000","volume":2012900,"high":691.74,"low":679.74,"close":682.02,"open":691.61},{"date":"2021-11-17T00:00:00+0000","volume":2732831,"high":700.9894,"low":686.09,"close":691.69,"open":690},{"date":"2021-11-16T00:00:00+0000","volume":2075800,"high":688.36,"low":676.9,"close":687.4,"open":678.27},{"date":"2021-11-15T00:00:00+0000","volume":2871100,"high":685.26,"low":671.49,"close":679.33,"open":681.24},{"date":"2021-11-12T00:00:00+0000","volume":4192700,"high":683.34,"low":653.82,"close":682.61,"open":660.01},{"date":"2021-11-11T00:00:00+0000","volume":2866200,"high":665.82,"low":649.71,"close":657.58,"open":650.24},{"date":"2021-11-10T00:00:00+0000","volume":2287811,"high":660.3306,"low":642.11,"close":646.91,"open":653.01},{"date":"2021-11-09T00:00:00+0000","volume":2415630,"high":660.5,"low":650.675,"close":655.99,"open":653.7},{"date":"2021-11-08T00:00:00+0000","volume":2887523,"high":655.8792,"low":643.8,"close":651.45,"open":650.29},{"date":"2021-11-05T00:00:00+0000","volume":5277400,"high":665.64,"low":645.01,"close":645.72,"open":663.97},{"date":"2021-11-04T00:00:00+0000","volume":4863100,"high":685.94,"low":665.5,"close":668.4,"open":685.89},{"date":"2021-11-03T00:00:00+0000","volume":2334852,"high":689.39,"low":677.27,"close":688.29,"open":677.27},{"date":"2021-11-02T00:00:00+0000","volume":3887100,"high":687.68,"low":673.82,"close":677.72,"open":683.11},{"date":"2021-11-01T00:00:00+0000","volume":3110911,"high":689.57,"low":676.54,"close":681.17,"open":689.06},{"date":"2021-10-29T00:00:00+0000","volume":3817500,"high":690.97,"low":671.24,"close":690.31,"open":673.06},{"date":"2021-10-28T00:00:00+0000","volume":2855300,"high":676.8,"low":668.03,"close":674.05,"open":670.95},{"date":"2021-10-27T00:00:00+0000","volume":2276914,"high":671.41,"low":661.86,"close":662.92,"open":669},{"date":"2021-10-26T00:00:00+0000","volume":2902200,"high":676.49,"low":662.77,"close":668.52,"open":673.76},{"date":"2021-10-25T00:00:00+0000","volume":3827218,"high":675.88,"low":657.07,"close":671.66,"open":663.74},{"date":"2021-10-22T00:00:00+0000","volume":6179700,"high":665.46,"low":651.81,"close":664.78,"open":651.81},{"date":"2021-10-21T00:00:00+0000","volume":8427800,"high":654.01,"low":628.65,"close":653.16,"open":628.89},{"date":"2021-10-20T00:00:00+0000","volume":10525936,"high":637.3,"low":617.15,"close":625.14,"open":625.5728},{"date":"2021-10-19T00:00:00+0000","volume":7502000,"high":641,"low":632.3,"close":639,"open":636.97},{"date":"2021-10-18T00:00:00+0000","volume":4407973,"high":638.41,"low":620.5901,"close":637.97,"open":632.1},{"date":"2021-10-15T00:00:00+0000","volume":4116874,"high":639.42,"low":625.16,"close":628.29,"open":638},{"date":"2021-10-14T00:00:00+0000","volume":2672535,"high":636.88,"low":626.8,"close":633.8,"open":632.23},{"date":"2021-10-13T00:00:00+0000","volume":2424638,"high":632.1791,"low":622.19,"close":629.76,"open":632.179},{"date":"2021-10-12T00:00:00+0000","volume":3152931,"high":637.655,"low":621.99,"close":624.94,"open":633.02},{"date":"2021-10-11T00:00:00+0000","volume":2862470,"high":639.38,"low":626.78,"close":627.04,"open":633.195},{"date":"2021-10-08T00:00:00+0000","volume":3271100,"high":643.8,"low":630.86,"close":632.66,"open":634.17},{"date":"2021-10-07T00:00:00+0000","volume":3451046,"high":646.84,"low":630.45,"close":631.85,"open":642.225},{"date":"2021-10-06T00:00:00+0000","volume":4580434,"high":639.8699,"low":626.42,"close":639.1,"open":628.18},{"date":"2021-10-05T00:00:00+0000","volume":9534293,"high":640.39,"low":606.89,"close":634.81,"open":606.94},{"date":"2021-10-04T00:00:00+0000","volume":4904372,"high":626.125,"low":594.79,"close":603.35,"open":613.39},{"date":"2021-10-01T00:00:00+0000","volume":4089800,"high":614.99,"low":597.51,"close":613.15,"open":604.24},{"date":"2021-09-30T00:00:00+0000","volume":6616040,"high":619,"low":608.05,"close":610.34,"open":608.05},{"date":"2021-09-29T00:00:00+0000","volume":6221026,"high":609.8799,"low":588.01,"close":599.06,"open":589.01},{"date":"2021-09-28T00:00:00+0000","volume":4431051,"high":599.5353,"low":580.16,"close":583.85,"open":589},{"date":"2021-09-27T00:00:00+0000","volume":2453741,"high":593.54,"low":576.93,"close":592.64,"open":587.95},{"date":"2021-09-24T00:00:00+0000","volume":2124800,"high":592.98,"low":583.64,"close":592.39,"open":592.5},{"date":"2021-09-23T00:00:00+0000","volume":2526161,"high":599.26,"low":589.1301,"close":593.26,"open":590.79},{"date":"2021-09-22T00:00:00+0000","volume":4021845,"high":595.59,"low":579.69,"close":590.65,"open":579.69},{"date":"2021-09-21T00:00:00+0000","volume":2192992,"high":581.45,"low":569.37,"close":573.14,"open":578.31},{"date":"2021-09-20T00:00:00+0000","volume":3328445,"high":591.52,"low":568.08,"close":575.43,"open":586.79},{"date":"2021-09-17T00:00:00+0000","volume":4143700,"high":590.28,"low":580.85,"close":589.35,"open":587.85},{"date":"2021-09-16T00:00:00+0000","volume":1825332,"high":587.48,"low":577.72,"close":586.5,"open":584.3},{"date":"2021-09-15T00:00:00+0000","volume":2653721,"high":584.57,"low":575.48,"close":582.87,"open":578.17},{"date":"2021-09-14T00:00:00+0000","volume":3456958,"high":587.28,"low":575.57,"close":577.76,"open":584.89},{"date":"2021-09-13T00:00:00+0000","volume":3001989,"high":598.57,"low":582.8575,"close":589.29,"open":598.57},{"date":"2021-09-10T00:00:00+0000","volume":3948000,"high":609.45,"low":593.67,"close":598.72,"open":598.16},{"date":"2021-09-09T00:00:00+0000","volume":2866961,"high":609.44,"low":596.55,"close":597.54,"open":606.47},{"date":"2021-09-08T00:00:00+0000","volume":5411201,"high":615.6,"low":595.71,"close":606.05,"open":603.84},{"date":"2021-09-07T00:00:00+0000","volume":5778075,"high":613.85,"low":593.99,"close":606.71,"open":594.69},{"date":"2021-09-03T00:00:00+0000","volume":2681200,"high":591.88,"low":583.14,"close":590.53,"open":585.8},{"date":"2021-09-02T00:00:00+0000","volume":6039424,"high":598.7567,"low":583.68,"close":588.55,"open":583.68},{"date":"2021-09-01T00:00:00+0000","volume":5626214,"high":591,"low":569,"close":582.07,"open":569},{"date":"2021-08-31T00:00:00+0000","volume":2268839,"high":569.47,"low":561.69,"close":569.19,"open":566.12},{"date":"2021-08-30T00:00:00+0000","volume":2434839,"high":567.1648,"low":556.45,"close":566.18,"open":557.25},{"date":"2021-08-27T00:00:00+0000","volume":3252595,"high":563.86,"low":549.5,"close":558.92,"open":551.6},{"date":"2021-08-26T00:00:00+0000","volume":1571419,"high":552.604,"low":545.9,"close":550.12,"open":546.16},{"date":"2021-08-25T00:00:00+0000","volume":2065621,"high":552.84,"low":545.45,"close":547.58,"open":550.16},{"date":"2021-08-24T00:00:00+0000","volume":2109525,"high":555.3141,"low":549.27,"close":553.41,"open":551.484},{"date":"2021-08-23T00:00:00+0000","volume":2602010,"high":555.55,"low":543.74,"close":553.33,"open":545.98},{"date":"2021-08-20T00:00:00+0000","volume":3776429,"high":551.38,"low":539.1,"close":546.88,"open":545.09},{"date":"2021-08-19T00:00:00+0000","volume":7497292,"high":548.39,"low":521.87,"close":543.71,"open":522.74},{"date":"2021-08-18T00:00:00+0000","volume":2456264,"high":526.38,"low":518.65,"close":521.87,"open":520},{"date":"2021-08-17T00:00:00+0000","volume":2309803,"high":520.76,"low":514.2,"close":518.91,"open":515.465},{"date":"2021-08-16T00:00:00+0000","volume":2033176,"high":523.38,"low":512.33,"close":517.92,"open":515.24},{"date":"2021-08-13T00:00:00+0000","volume":2177736,"high":521.44,"low":511.51,"close":515.92,"open":512.64},{"date":"2021-08-12T00:00:00+0000","volume":1685700,"high":513,"low":507.2,"close":510.72,"open":511.86},{"date":"2021-08-11T00:00:00+0000","volume":1657186,"high":519.57,"low":509.77,"close":512.4,"open":517},{"date":"2021-08-10T00:00:00+0000","volume":1960544,"high":520.79,"low":512.965,"close":515.84,"open":520},{"date":"2021-08-09T00:00:00+0000","volume":1301705,"high":522.6699,"low":517.99,"close":519.97,"open":521.1469},{"date":"2021-08-06T00:00:00+0000","volume":1887090,"high":526.84,"low":519.39,"close":520.55,"open":524},{"date":"2021-08-05T00:00:00+0000","volume":2479185,"high":525.41,"low":514.02,"close":524.89,"open":517.13},{"date":"2021-08-04T00:00:00+0000","volume":2030146,"high":517.95,"low":510.38,"close":517.35,"open":513},{"date":"2021-08-03T00:00:00+0000","volume":2572439,"high":515.51,"low":505.42,"close":510.82,"open":514.39},{"date":"2021-08-02T00:00:00+0000","volume":1886280,"high":519.56,"low":510.51,"close":515.15,"open":519},{"date":"2021-07-30T00:00:00+0000","volume":2455187,"high":519.74,"low":510.9642,"close":517.57,"open":512.69},{"date":"2021-07-29T00:00:00+0000","volume":1736014,"high":520.7799,"low":513.7927,"close":514.25,"open":519.96},{"date":"2021-07-28T00:00:00+0000","volume":2390466,"high":524.47,"low":517,"close":519.3,"open":521.82},{"date":"2021-07-27T00:00:00+0000","volume":2753464,"high":521.91,"low":512.05,"close":518.91,"open":518.08},{"date":"2021-07-26T00:00:00+0000","volume":2205634,"high":521.0802,"low":509.0101,"close":516.49,"open":514.38},{"date":"2021-07-23T00:00:00+0000","volume":3795803,"high":517.41,"low":504.66,"close":515.41,"open":512.16},{"date":"2021-07-22T00:00:00+0000","volume":4328061,"high":513.6,"low":507.045,"close":511.77,"open":510.206},{"date":"2021-07-21T00:00:00+0000","volume":11906845,"high":530.99,"low":505.61,"close":513.63,"open":526.13},{"date":"2021-07-20T00:00:00+0000","volume":6579777,"high":536.63,"low":520.3,"close":531.05,"open":526.07},{"date":"2021-07-19T00:00:00+0000","volume":3664867,"high":534.8835,"low":522.25,"close":532.28,"open":526.05},{"date":"2021-07-16T00:00:00+0000","volume":3442101,"high":544.06,"low":527.05,"close":530.31,"open":541.81},{"date":"2021-07-15T00:00:00+0000","volume":5713873,"high":557.5399,"low":538.2,"close":542.95,"open":553.97},{"date":"2021-07-14T00:00:00+0000","volume":4410996,"high":554.1,"low":541.01,"close":547.95,"open":541.01},{"date":"2021-07-13T00:00:00+0000","volume":2751593,"high":545.33,"low":535.76,"close":540.68,"open":535.76},{"date":"2021-07-12T00:00:00+0000","volume":1733397,"high":540.45,"low":532.92,"close":537.31,"open":540.3},{"date":"2021-07-09T00:00:00+0000","volume":2777231,"high":538.26,"low":528.58,"close":535.98,"open":531},{"date":"2021-07-08T00:00:00+0000","volume":3268988,"high":535.5,"low":529.09,"close":530.76,"open":530.93},{"date":"2021-07-07T00:00:00+0000","volume":2722498,"high":544.64,"low":531.795,"close":535.96,"open":544.24},{"date":"2021-07-06T00:00:00+0000","volume":2775051,"high":542.86,"low":533,"close":541.64,"open":533},{"date":"2021-07-02T00:00:00+0000","volume":1980316,"high":538.5,"low":529.39,"close":533.98,"open":535.5},{"date":"2021-07-01T00:00:00+0000","volume":2781736,"high":537.04,"low":525.72,"close":533.54,"open":525.72},{"date":"2021-06-30T00:00:00+0000","volume":2773445,"high":534.38,"low":526.85,"close":528.21,"open":534.0551},{"date":"2021-06-29T00:00:00+0000","volume":2314647,"high":536,"low":528.57,"close":533.5,"open":533.55},{"date":"2021-06-28T00:00:00+0000","volume":2778670,"high":533.9399,"low":524.6,"close":533.03,"open":528.12},{"date":"2021-06-25T00:00:00+0000","volume":5296500,"high":533.06,"low":525,"close":527.07,"open":528.84},{"date":"2021-06-24T00:00:00+0000","volume":3199408,"high":520.87,"low":514.5,"close":518.06,"open":517.96},{"date":"2021-06-23T00:00:00+0000","volume":3944782,"high":516.63,"low":508.25,"close":512.74,"open":508.48},{"date":"2021-06-22T00:00:00+0000","volume":5809271,"high":513.55,"low":495.795,"close":508.82,"open":498.54},{"date":"2021-06-21T00:00:00+0000","volume":5022111,"high":502.02,"low":492.37,"close":497,"open":501.64},{"date":"2021-06-18T00:00:00+0000","volume":5197576,"high":504.49,"low":495.3,"close":500.77,"open":496.4},{"date":"2021-06-17T00:00:00+0000","volume":3180035,"high":501.8,"low":490.25,"close":498.34,"open":490.25},{"date":"2021-06-16T00:00:00+0000","volume":3533206,"high":496.46,"low":486.3,"close":492.41,"open":495},{"date":"2021-06-15T00:00:00+0000","volume":3101041,"high":501.23,"low":490.4,"close":491.9,"open":501.23},{"date":"2021-06-14T00:00:00+0000","volume":4050551,"high":503.49,"low":487,"close":499.89,"open":489.68},{"date":"2021-06-11T00:00:00+0000","volume":3115903,"high":491.4,"low":487.81,"close":488.77,"open":490},{"date":"2021-06-10T00:00:00+0000","volume":4369261,"high":490.21,"low":482.2665,"close":487.27,"open":487.165},{"date":"2021-06-09T00:00:00+0000","volume":2974661,"high":496.09,"low":484.65,"close":485.81,"open":494.5},{"date":"2021-06-08T00:00:00+0000","volume":2319192,"high":498.82,"low":489.37,"close":492.39,"open":497},{"date":"2021-06-07T00:00:00+0000","volume":2697817,"high":496.69,"low":490.55,"close":494.66,"open":492.9169},{"date":"2021-06-04T00:00:00+0000","volume":3037396,"high":501.86,"low":490.96,"close":494.74,"open":492},{"date":"2021-06-03T00:00:00+0000","volume":3835061,"high":496.66,"low":487.3,"close":489.43,"open":495.19},{"date":"2021-06-02T00:00:00+0000","volume":2180641,"high":503.22,"low":495.8562,"close":499.24,"open":499.82},{"date":"2021-06-01T00:00:00+0000","volume":2456291,"high":505.38,"low":497.7443,"close":499.08,"open":504.01},{"date":"2021-05-28T00:00:00+0000","volume":2911297,"high":511.66,"low":502.53,"close":502.81,"open":504.4},{"date":"2021-05-27T00:00:00+0000","volume":3253773,"high":505.1,"low":498.7,"close":503.86,"open":501.8},{"date":"2021-05-26T00:00:00+0000","volume":2465303,"high":504.1173,"low":500.54,"close":502.36,"open":502.34},{"date":"2021-05-25T00:00:00+0000","volume":2699459,"high":506.365,"low":499.22,"close":501.34,"open":506},{"date":"2021-05-24T00:00:00+0000","volume":2412595,"high":504.21,"low":499.56,"close":502.9,"open":501.05},{"date":"2021-05-21T00:00:00+0000","volume":3040267,"high":505.4,"low":497.26,"close":497.89,"open":503.12},{"date":"2021-05-20T00:00:00+0000","volume":3650611,"high":502.6985,"low":488.975,"close":501.67,"open":489.55},{"date":"2021-05-19T00:00:00+0000","volume":3349930,"high":488.53,"low":478.54,"close":487.7,"open":481.625},{"date":"2021-05-18T00:00:00+0000","volume":2288272,"high":493.385,"low":486.1895,"close":486.28,"open":488.395},{"date":"2021-05-17T00:00:00+0000","volume":2668998,"high":492.6099,"low":482.81,"close":488.94,"open":485.59},{"date":"2021-05-14T00:00:00+0000","volume":2625933,"high":494.79,"low":486.68,"close":493.37,"open":487.86},{"date":"2021-05-13T00:00:00+0000","volume":2636767,"high":490.775,"low":482.71,"close":486.66,"open":489.13},{"date":"2021-05-12T00:00:00+0000","volume":4017841,"high":493.53,"low":482.7,"close":484.98,"open":486.83},{"date":"2021-05-11T00:00:00+0000","volume":4225027,"high":497.99,"low":478.63,"close":495.08,"open":479.75},{"date":"2021-05-10T00:00:00+0000","volume":5016414,"high":503,"low":486.11,"close":486.69,"open":502},{"date":"2021-05-07T00:00:00+0000","volume":3102484,"high":508.55,"low":501.12,"close":503.84,"open":504.62},{"date":"2021-05-06T00:00:00+0000","volume":3685199,"high":499.55,"low":491.38,"close":499.55,"open":495.99},{"date":"2021-05-05T00:00:00+0000","volume":3121900,"high":507.78,"low":494.63,"close":496.08,"open":504.99},{"date":"2021-05-04T00:00:00+0000","volume":4347600,"high":511.63,"low":496.79,"close":503.18,"open":510.78},{"date":"2021-05-03T00:00:00+0000","volume":4004521,"high":518.95,"low":505.2,"close":509.11,"open":512.65},{"date":"2021-04-30T00:00:00+0000","volume":4239771,"high":514.55,"low":505,"close":513.47,"open":505},{"date":"2021-04-29T00:00:00+0000","volume":5010450,"high":509.29,"low":499,"close":509,"open":507.6},{"date":"2021-04-28T00:00:00+0000","volume":3161174,"high":508.395,"low":503.34,"close":506.52,"open":505.2},{"date":"2021-04-27T00:00:00+0000","volume":3715876,"high":512.99,"low":504.5808,"close":505.55,"open":512.62},{"date":"2021-04-26T00:00:00+0000","volume":3906252,"high":510.48,"low":503,"close":510.3,"open":506.76},{"date":"2021-04-23T00:00:00+0000","volume":7307700,"high":509.7,"low":500.7,"close":505.55,"open":509.01},{"date":"2021-04-22T00:00:00+0000","volume":9061062,"high":513.96,"low":500.55,"close":508.78,"open":513.82},{"date":"2021-04-21T00:00:00+0000","volume":22321703,"high":515.46,"low":503.6001,"close":508.9,"open":508},{"date":"2021-04-20T00:00:00+0000","volume":6346454,"high":563.56,"low":546.45,"close":549.57,"open":554.42},{"date":"2021-04-19T00:00:00+0000","volume":3880600,"high":556.44,"low":545.53,"close":554.44,"open":546.9},{"date":"2021-04-16T00:00:00+0000","volume":3022079,"high":551.98,"low":539.51,"close":546.54,"open":550.54},{"date":"2021-04-15T00:00:00+0000","volume":3139050,"high":553.42,"low":542.66,"close":549.22,"open":544.17},{"date":"2021-04-14T00:00:00+0000","volume":3740294,"high":554.87,"low":538.53,"close":540.02,"open":554.87},{"date":"2021-04-13T00:00:00+0000","volume":2653331,"high":559.75,"low":550.37,"close":553.73,"open":557},{"date":"2021-04-12T00:00:00+0000","volume":2875084,"high":557.98,"low":549.84,"close":552.78,"open":551.05},{"date":"2021-04-09T00:00:00+0000","volume":2894034,"high":556.9,"low":547.11,"close":555.31,"open":552.69},{"date":"2021-04-08T00:00:00+0000","volume":4309829,"high":556.899,"low":547.57,"close":554.58,"open":551.13},{"date":"2021-04-07T00:00:00+0000","volume":2022582,"high":549.56,"low":541.45,"close":546.99,"open":543.5},{"date":"2021-04-06T00:00:00+0000","volume":3474205,"high":554.165,"low":543.3,"close":544.53,"open":544.81},{"date":"2021-04-05T00:00:00+0000","volume":3355904,"high":542.81,"low":529.23,"close":540.67,"open":540.01},{"date":"2021-04-01T00:00:00+0000","volume":3938637,"high":540.5,"low":527.03,"close":539.42,"open":529.93},{"date":"2021-03-31T00:00:00+0000","volume":3353684,"high":528.13,"low":515.64,"close":521.66,"open":515.675},{"date":"2021-03-30T00:00:00+0000","volume":2418129,"high":514.41,"low":506.92,"close":513.39,"open":510.505},{"date":"2021-03-29T00:00:00+0000","volume":3330049,"high":518,"low":504.49,"close":513.95,"open":505.66},{"date":"2021-03-26T00:00:00+0000","volume":3467797,"high":508.72,"low":496.68,"close":508.05,"open":502.82},{"date":"2021-03-25T00:00:00+0000","volume":4885118,"high":518.53,"low":497,"close":502.86,"open":516.99},{"date":"2021-03-24T00:00:00+0000","volume":4102213,"high":534.42,"low":520,"close":520.81,"open":533.78},{"date":"2021-03-23T00:00:00+0000","volume":5270817,"high":543.12,"low":529.4,"close":535.09,"open":529.87},{"date":"2021-03-22T00:00:00+0000","volume":3360587,"high":529.31,"low":509.13,"close":523.11,"open":509.13},{"date":"2021-03-19T00:00:00+0000","volume":4384500,"high":513.19,"low":501.63,"close":512.18,"open":504.96},{"date":"2021-03-18T00:00:00+0000","volume":3946478,"high":517.7599,"low":503.8627,"close":504.79,"open":516.3959},{"date":"2021-03-17T00:00:00+0000","volume":2817376,"high":528.3654,"low":514.3,"close":524.44,"open":522},{"date":"2021-03-16T00:00:00+0000","volume":3128159,"high":533.42,"low":523.21,"close":524.03,"open":524.47},{"date":"2021-03-15T00:00:00+0000","volume":3485519,"high":520.729,"low":508.03,"close":520.25,"open":516.32},{"date":"2021-03-12T00:00:00+0000","volume":3980300,"high":526.51,"low":506.59,"close":518.02,"open":512.5},{"date":"2021-03-11T00:00:00+0000","volume":4711000,"high":530.24,"low":510.71,"close":523.06,"open":512.2},{"date":"2021-03-10T00:00:00+0000","volume":3768900,"high":518.97,"low":504.25,"close":504.54,"open":513.5},{"date":"2021-03-09T00:00:00+0000","volume":3462000,"high":513.11,"low":503.82,"close":506.44,"open":507.31},{"date":"2021-03-08T00:00:00+0000","volume":3979000,"high":518.84,"low":492.85,"close":493.33,"open":514.46},{"date":"2021-03-05T00:00:00+0000","volume":5068700,"high":517.76,"low":498.7901,"close":516.39,"open":511.98},{"date":"2021-03-04T00:00:00+0000","volume":4881483,"high":531.46,"low":507.71,"close":511.29,"open":521.5},{"date":"2021-03-03T00:00:00+0000","volume":5231335,"high":548.005,"low":517.81,"close":520.7,"open":545.93},{"date":"2021-03-02T00:00:00+0000","volume":3042226,"high":556.99,"low":546.02,"close":547.82,"open":553.34},{"date":"2021-03-01T00:00:00+0000","volume":3042180,"high":552.14,"low":542,"close":550.64,"open":545.573},{"date":"2021-02-26T00:00:00+0000","volume":3755574,"high":553.09,"low":538,"close":538.85,"open":546.51},{"date":"2021-02-25T00:00:00+0000","volume":3944917,"high":556.48,"low":535.8,"close":546.7,"open":550.27},{"date":"2021-02-24T00:00:00+0000","volume":3245038,"high":556.8499,"low":539.065,"close":553.41,"open":539.8},{"date":"2021-02-23T00:00:00+0000","volume":4136532,"high":548.54,"low":518.39,"close":546.15,"open":525.0035},{"date":"2021-02-22T00:00:00+0000","volume":3005641,"high":541.79,"low":530.99,"close":533.78,"open":534.99},{"date":"2021-02-19T00:00:00+0000","volume":2841457,"high":548.99,"low":538.8132,"close":540.22,"open":548},{"date":"2021-02-18T00:00:00+0000","volume":2457604,"high":550,"low":538.2265,"close":548.22,"open":549},{"date":"2021-02-17T00:00:00+0000","volume":2057853,"high":555.25,"low":543.03,"close":551.34,"open":550.99},{"date":"2021-02-16T00:00:00+0000","volume":2624097,"high":563.63,"low":552.73,"close":557.28,"open":557.286},{"date":"2021-02-12T00:00:00+0000","volume":2197128,"high":561.2499,"low":550.85,"close":556.52,"open":556.94},{"date":"2021-02-11T00:00:00+0000","volume":2730587,"high":565.93,"low":554.22,"close":557.59,"open":564.442},{"date":"2021-02-10T00:00:00+0000","volume":3940210,"high":566.65,"low":553.463,"close":563.59,"open":562.5},{"date":"2021-02-09T00:00:00+0000","volume":3685157,"high":566,"low":543,"close":559.07,"open":546}]`

STOCK_NAME='Netflix, Inc.'
STOCK_ADDRESS='100 Winchester Cir, Los Gatos, California, United States'
STOCK_DESCRIPTION='Netflix, Inc. is an American subscription streaming service and production company. Launched on August 29, 1997, it offers a library of films and television series through distribution deals as well as its own productions, known as Netflix Originals.'

/* var upward = "rgb(17,149,8)"
var downward = "rgb(202, 29, 33)" */
firstDate = ""
lastDate = ""
earnedInTimePeriod = 0

function STDs(){

    /* st = GetURLParameter("st")
    st = st.replaceAll("%22", '"') */
    st = JSON.parse(st)

    st = st.reverse()

    date = new Date(st[0].date)
    firstDate = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDay()}`
    date = new Date(st[st.length-1].date)
    lastDate = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDay()}`

    earnedInTimePeriod = (st[st.length-1].close - st[0].close).toFixed(2)

    console.log(st)

    mainInfo()
    mainChart()
    theOtherChart()
}

function marqData(string){
    marqDa = document.getElementById("marqData")

    if(marqDa.innerHTML != ""){
        marqDa.innerHTML += " -.- "
    }
    marqDa.innerHTML += string
}

function mainInfo(){
    document.getElementById("title").innerHTML = STOCK_NAME
    document.getElementById("code").innerHTML = st[st.length - 1].symbol
    document.getElementById("exchange").innerHTML = st[st.length - 1].exchange
    document.getElementById("address").innerHTML = STOCK_ADDRESS
    document.getElementById("description").innerHTML = STOCK_DESCRIPTION
    marqData(`Last close: ${(st[st.length - 1].close).toFixed(2)}$`)

    repeat = true
    budget = 1
    while(repeat){
        budget *= 10
        maxHypo = maxHypotheticalHighAndSellRevenue(budget)
        if(maxHypo != budget) repeat = false
    }
    document.getElementById("maxHypo").innerHTML = `If you had marketed ${budget}$ you would have ${maxHypo}$ now.`


    if(earnedInTimePeriod >= 0){
        document.getElementById("earned").innerHTML = `In the time span the company has earned: ${earnedInTimePeriod}$.`
    } else document.getElementById("earned").innerHTML = `In the time span the company has lost: ${-earnedInTimePeriod}$.`

    document.getElementById("raiseDays").innerHTML = `The stock has risen ${raiseDaysPercentage()}% of the days in the time span.`
}

function maxHypotheticalHighAndSellRevenue(budget){
    yesterday = st[0].close
    stocks = 0
    higher = 0
    for (let i = 1; i < st.length; i++) {
        today = st[i].close
        if(today > yesterday || st.length - i < 2){
            if(stocks > 0 || st.length - i < 5){
                sellableAmount = 1
                if(higher > 0 || st.length - i < 5){
                    sellableAmount = stocks
                }
                budget += today * sellableAmount
                stocks -= sellableAmount
            }
            higher = 1
        } else if(today < yesterday){
            if(budget >= today && !st.length - i < 10){
                buyableAmount = 1
                if(higher < 0){
                    buyableAmount = Math.floor(budget / today)
                }
                budget -= today * buyableAmount
                stocks += buyableAmount
            }
            higher = -1
        } else {
            if(higher > 0 && stocks >= 0){
                budget += today
            } else if(higher < 0 && budget >= today){
                budget -= today
                stocks += 1
            }
        }

        yesterday = today
    }
    return (budget).toFixed(2)
}

function raiseDaysPercentage(){
    daysPassed = 0
    daysRaised = 0
    yesterday = st[0].close
    for (let i = 1; i < st.length; i++) {
        today = st[i].close
        if(today > yesterday) {
            daysRaised += 1
        }
        daysPassed += 1
        yesterday = today
    }
    return (daysRaised / daysPassed).toFixed(3)
}

function mainChart(){
    const ctx = document.getElementById('main-chart')

    closes = []
    opens = []
    highs = []
    lows = []
    labels = []
    max = st[0].close
    min = st[0].close

    for (let i = 0; i < st.length; i++) {
        if(max < st[i].close) max = st[i].close
        if(min > st[i].close) min = st[i].close
        closes[i] = st[i].close
        opens[i] = st[i].open
        highs[i] = st[i].high
        lows[i] = st[i].low
        date = new Date(st[i].date)
        labels[i] = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDay()}`
    }
    marqData(`MAX in time: ${max.toFixed(2)}$`)
    marqData(`MIN in time: ${min.toFixed(2)}$`)

    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Close',
                data: closes,
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            },{
                label: 'Open',
                data: opens,
                fill: false,
                borderColor: 'rgb(95, 70, 192)',
                tension: 0.1
            },{
                label: 'High',
                data: highs,
                fill: false,
                borderColor: 'rgb(14, 205, 14)',
                tension: 0.1
            },{
                label: 'Low',
                data: lows,
                fill: false,
                borderColor: 'rgb(220, 40, 70)',
                tension: 0.1
            }]
        },
        options: {
            scales: {
                x: {
                    ticks: {
                        color: 'whitesmoke'
                    }
                },
                y: {
                    ticks: {
                        color: 'whitesmoke'
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: 'whitesmoke'
                    }
                }
            }
        }
    })
}

function theOtherChart(){
    const ctx = document.getElementById('the-other-chart')
    labels = []
    data = []
    MCVs = []

    MCVs[0] = new MCV(st[0].close, 1)

    for (let i = 1; i < st.length; i++){
        done = false
        for (let j = 0; j < MCVs.length; j++) {
            if(MCVs[j].value == st[i].close && !done){
                MCVs[j].repetitions += 1;
                done = true
            }

            if(j == MCVs.length - 1 && !done){
                MCVs[MCVs.length] = new MCV(st[i].close, 0)
            }
        }

    }

    for (let i = 0; i < MCVs.length; i++) {
        data[i] = MCVs[i].repetitions
        labels[i] = MCVs[i].value
    }

    console.log(MCVs)

    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Most Common Values',
                data: data,
                fill: false,
                backgroundColor: 'rgb(75, 192, 192)',
                borderColor: 'rgb(55, 172, 172)',
                borderWidth: 2,
                tension: 0.1
            }]
        },
        options: {
            scales: {
                x: {
                    ticks: {
                        color: 'whitesmoke'
                    }
                },
                y: {
                    ticks: {
                        color: 'whitesmoke'
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: 'whitesmoke'
                    }
                }
            }
        }
    })
}

class MCV{
    constructor(value, repetitions){
        this.value = value
        this.repetitions = repetitions
    }
}

function saveAsImage(main){
    link = document.createElement('a')
    if(main){
        link.download = `${STOCK_NAME} from ${firstDate} to ${lastDate}.png`
        chart = document.getElementById('main-chart')
    } else {
        link.download = `MCV in ${STOCK_NAME} from ${firstDate} to ${lastDate}.png`
        chart = document.getElementById('the-other-chart')
    }
    link.href = chart.toDataURL()
    link.click()
    link.delete
}

function GetURLParameter(sParam)
{
    var sPageURL = window.location.search.substring(1)
    var sURLVariables = sPageURL.split('&')
    for (var i = 0; i < sURLVariables.length; i++)
    {
        var sParameterName = sURLVariables[i].split('=')
        if (sParameterName[0] == sParam)
        {
            return sParameterName[1]
        }
    }
}
